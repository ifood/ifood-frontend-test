{"ast":null,"code":"import _toConsumableArray from \"/Users/pedroneto/Documents/pessoal/spotifood/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/pedroneto/Documents/pessoal/spotifood/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/pedroneto/Documents/pessoal/spotifood/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/pedroneto/Documents/pessoal/spotifood/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/pedroneto/Documents/pessoal/spotifood/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/pedroneto/Documents/pessoal/spotifood/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/pedroneto/Documents/pessoal/spotifood/src/components/ListPlaylist.js\";\nimport React, { Component } from 'react';\nimport { Button } from 'react-bootstrap';\nimport api from '../services/api';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport * as playlistsActions from '../actions/playlists';\nimport './ListPlaylist.css';\nimport Playlist from '../components/Playlist';\n\nvar ListPlaylist =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ListPlaylist, _Component);\n\n  function ListPlaylist() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ListPlaylist);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ListPlaylist)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      limit: 4,\n      offset: 4,\n      loadingMore: false,\n      showLoadMore: true\n    };\n\n    _this.handleClick = function (e) {\n      var _this$state = _this.state,\n          limit = _this$state.limit,\n          offset = _this$state.offset;\n\n      _this.setState({\n        offset: offset + limit,\n        loadingMore: true\n      });\n\n      var response = api.get('browse/featured-playlists', {\n        params: {\n          limit: 4,\n          offset: offset\n        }\n      }).then(function (data) {\n        var newData = data.data.playlists.items;\n\n        if (newData.length === 0) {\n          _this.setState({\n            showLoadMore: false\n          });\n\n          return;\n        }\n\n        var playlists = [].concat(_toConsumableArray(_this.props.playlists[0]), _toConsumableArray(newData));\n\n        _this.props.listPlaylists(playlists);\n\n        _this.setState({\n          loadingMore: false\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(ListPlaylist, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var playlists = this.props.playlists;\n      var _this$state2 = this.state,\n          loadingMore = _this$state2.loadingMore,\n          showLoadMore = _this$state2.showLoadMore;\n      var data = playlists[0];\n\n      if (data !== undefined) {\n        return React.createElement(React.Fragment, null, data.map(function (item) {\n          return React.createElement(Playlist, {\n            key: item.id,\n            playlist: item,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 62\n            },\n            __self: this\n          });\n        }), showLoadMore ? React.createElement(\"div\", {\n          className: \"load-more-button\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65\n          },\n          __self: this\n        }, React.createElement(Button, {\n          onClick: function onClick() {\n            return _this2.handleClick();\n          },\n          style: {\n            backgroundColor: 'rgb(0, 225, 85)',\n            border: 0,\n            fontWeight: '500'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        }, loadingMore ? 'Loading...' : 'Load More')) : null);\n      } else {\n        return null;\n      }\n    }\n  }]);\n\n  return ListPlaylist;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    playlists: state.playlists,\n    isFilters: isFilters\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return bindActionCreators(playlistsActions, dispatch);\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ListPlaylist);","map":{"version":3,"sources":["/Users/pedroneto/Documents/pessoal/spotifood/src/components/ListPlaylist.js"],"names":["React","Component","Button","api","bindActionCreators","connect","playlistsActions","Playlist","ListPlaylist","state","limit","offset","loadingMore","showLoadMore","handleClick","e","setState","response","get","params","then","data","newData","playlists","items","length","props","listPlaylists","catch","error","console","log","undefined","map","item","id","backgroundColor","border","fontWeight","mapStateToProps","isFilters","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport { Button } from 'react-bootstrap';\n\nimport api from '../services/api';\n\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\nimport * as playlistsActions from '../actions/playlists';\n\nimport './ListPlaylist.css';\n\nimport Playlist from '../components/Playlist';\n\nclass ListPlaylist extends Component {\n\tstate = {\n\t\tlimit: 4,\n\t\toffset: 4,\n\t\tloadingMore: false,\n\t\tshowLoadMore: true\n\t};\n\n\thandleClick = e => {\n\t\tconst { limit, offset } = this.state;\n\t\tthis.setState({\n\t\t\toffset: offset + limit,\n\t\t\tloadingMore: true\n\t\t});\n\n\t\tconst response = api\n\t\t\t.get('browse/featured-playlists', {\n\t\t\t\tparams: {\n\t\t\t\t\tlimit: 4,\n\t\t\t\t\toffset: offset\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(data => {\n\t\t\t\tconst newData = data.data.playlists.items;\n\t\t\t\tif (newData.length === 0) {\n\t\t\t\t\tthis.setState({ showLoadMore: false });\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst playlists = [...this.props.playlists[0], ...newData];\n\t\t\t\tthis.props.listPlaylists(playlists);\n\t\t\t\tthis.setState({ loadingMore: false });\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tconsole.log(error);\n\t\t\t});\n\t};\n\n\trender() {\n\t\tconst { playlists } = this.props;\n\t\tconst { loadingMore, showLoadMore } = this.state;\n\n\t\tlet data = playlists[0];\n\n\t\tif (data !== undefined) {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t{data.map(item => (\n\t\t\t\t\t\t<Playlist key={item.id} playlist={item} />\n\t\t\t\t\t))}\n\t\t\t\t\t{showLoadMore ? (\n\t\t\t\t\t\t<div className=\"load-more-button\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tonClick={() => this.handleClick()}\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tbackgroundColor: 'rgb(0, 225, 85)',\n\t\t\t\t\t\t\t\t\tborder: 0,\n\t\t\t\t\t\t\t\t\tfontWeight: '500'\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{loadingMore ? 'Loading...' : 'Load More'}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\t\t\t\t</>\n\t\t\t);\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n}\n\nconst mapStateToProps = state => ({\n\tplaylists: state.playlists,\n\tisFilters\n});\n\nconst mapDispatchToProps = dispatch =>\n\tbindActionCreators(playlistsActions, dispatch);\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(ListPlaylist);\n"]},"metadata":{},"sourceType":"module"}