(this["webpackJsonpifood-frontend-test"]=this["webpackJsonpifood-frontend-test"]||[]).push([[0],{180:function(e,t,a){e.exports=a(321)},189:function(e,t,a){},191:function(e,t,a){},321:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"FETCH_PLAYLISTS_SUCCESS",(function(){return I})),a.d(n,"FETCH_PLAYLISTS_ERROR",(function(){return j}));var l={};a.r(l),a.d(l,"FETCH_PLAYLISTS_FILTER_SUCCESS",(function(){return A})),a.d(l,"FETCH_PLAYLISTS_FILTER_ERROR",(function(){return P}));var r=a(0),c=a.n(r),s=a(73),i=a(25),o=a.n(i),u=(a(189),a(190),a(168)),m=a(8),p=a(45),h=(a(191),function(e){var t=e.button,a=e.icon,n=e.headersize;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"header ".concat(n)},c.a.createElement("div",{className:"header__text-box"},c.a.createElement("h1",{className:"header__text-box__spotifood"},c.a.createElement("span",{className:"welcome"},"Welcome to "),c.a.createElement("span",null,"Spotifood")),c.a.createElement("p",null,c.a.createElement("span",{className:"quote"},'"If music be the food of love, play on."'),c.a.createElement("br",null),c.a.createElement("span",{className:"quote italic"},"\u2013 William Shakespeare")),t||a)))}),d=a(33),f=a(11),E=a(68),y=a(69),S=a(76),_=a(74),v=a(329),g=a(170),C=a(330),b=function(e){var t=e.handleSearchChange;return c.a.createElement("div",{className:"search-input-container"},c.a.createElement(C.a,{name:"playlistName",icon:"search",placeholder:"Search...",className:"search-input",onChange:t}))},L=a(328),O=function(e){var t=[];return e&&e.length>0&&e.forEach((function(e){var a={key:e.value,text:e.name,value:e.value};t.push(a)})),t},F=function(e){var t,a=e.playlistsFilters,n=e.handleChange,l=a.filter((function(e){return"locale"===e.id}));l&&l.length>0&&(t=O(l[0].values));var r,s=a.filter((function(e){return"country"===e.id}));return s&&s.length>0&&(r=O(s[0].values)),c.a.createElement("div",{className:"plyalist-filters"},c.a.createElement(L.a,{placeholder:"Select Locale",name:"locale",fluid:!0,search:!0,selection:!0,className:"filter-dropdown",onChange:n,options:t||[]}),c.a.createElement(L.a,{placeholder:"Select Country",selection:!0,search:!0,name:"country",fluid:!0,className:"filter-dropdown",options:r||[],onChange:n}),c.a.createElement("input",{className:"filter-limit",min:"1",type:"number",max:"50",placeholder:"Limit number",name:"limit",onChange:n}),c.a.createElement("input",{className:"filter-limit",type:"date",name:"timestamp",onChange:n}),c.a.createElement("input",{className:"filter-limit",min:1,type:"number",max:50,placeholder:"Offset Number",name:"offset",onChange:n}))},T=function(e){Object(S.a)(a,e);var t=Object(_.a)(a);function a(){var e;Object(E.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={playlistName:"",searchResult:[]},e.handleSearch=function(t){var a=e.props.playlists.filter((function(e){return e.name.toLowerCase().startsWith(t)}));e.setState(Object(f.a)(Object(f.a)({},e.state),{},{searchResult:a}))},e.handleSearchChange=function(t){var a=t.target,n=a.name,l=a.value;e.setState(Object(f.a)(Object(f.a)({},e.state),{},Object(d.a)({},n,l)),(function(){e.handleSearch(l.toLowerCase())}))},e}return Object(y.a)(a,[{key:"render",value:function(){var e=this.props,t=e.playlists,a=e.playlistsFilters,n=e.handleChange,l=e.value,r=this.state.searchResult,s=r&&r.length>0?r:t;return c.a.createElement(c.a.Fragment,null,s&&s.length>0&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"main-container"},c.a.createElement(b,{handleSearchChange:this.handleSearchChange}),c.a.createElement(F,{playlistsFilters:a,handleChange:n,value:l}),c.a.createElement("div",{className:"playlists-container"},s&&s.map((function(e){return c.a.createElement(v.a,{className:"playlist-card",key:e.id},c.a.createElement(g.a,{className:"playlist-card__playlist-image",src:"".concat(e.images[0].url),wrapped:!0,ui:!1}),c.a.createElement("div",{className:"playlist-card__playlist-content"},c.a.createElement("h3",{className:"playlist-name"},e.name),c.a.createElement("p",{className:"playlist-description"},e.description),c.a.createElement("p",{className:"tracks"},"".concat(e.tracks.total," Songs"))))}))))))}}]),a}(r.Component),N=function(){return c.a.createElement("div",{className:"footer"},c.a.createElement("div",{className:"footer__quote"},c.a.createElement("p",{className:"quote"},'"If music be the food of love, play on."'),c.a.createElement("p",{className:"quote italic margin-left"},"\u2013 William Shakespeare")),c.a.createElement("div",null,c.a.createElement("div",{className:"footer__copyright"},c.a.createElement("p",{className:"margin-left"},"Built by Joseph Joe."),c.a.createElement("p",{className:"italic"},"Copyright \xa9 by Spotifood."))))},R=a(331),w=a(327),I="FETCH_PLAYLISTS_SUCCESS",j="FETCH_PLAYLISTS_ERROR",A="FETCH_PLAYLISTS_FILTER_SUCCESS",P="FETCH_PLAYLISTS_FILTER_ERROR",k=function(e){var t;return e.substring(1).split("&").reduce((function(e,a){if(a){var n=a.split("=");e[n[0]]=decodeURIComponent(n[1])}return t=e,e}),{}),t},H=a(72),Y=a.n(H),U=window.location.hash,x=k(U).access_token,z=a(166),B=a.n(z),D=function(e){var t=B()(e).toISOString();return t=t.substring(0,t.length-1),console.log("toISO DATA ===",t),t},W=function(e){Object(S.a)(a,e);var t=Object(_.a)(a);function a(){var e;Object(E.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={filters:{locale:null,country:null,limit:null,timestamp:null,offset:null}},e.updatingState=function(e,t){return""===t?null:"timestamp"===e?D(t):t},e.handleChange=function(t,a){var n,l=e.props.fetchPlaylists,r=e.state.filters;e.setState({filters:Object(f.a)(Object(f.a)({},r),{},(n={},Object(d.a)(n,t&&t.target.name,t&&e.updatingState(t.target.name,t.target.value)),Object(d.a)(n,a&&a.name,a?a.value:t.target.value),n))},(function(){console.log("Byagenze gute???",e.state.filters),l(e.state.filters)}))},e}return Object(y.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.fetchPlaylists;(0,e.fetchPlaylistsFilters)(),t(),setInterval((function(){return t()}),3e4)}},{key:"render",value:function(){var e=this.props,t=e.playlists,a=e.error,n=e.icon,l=e.playlistsFilters,r=this.state.filters;return a&&401===a.error.status&&window.location.replace("http://localhost:3006/"),c.a.createElement("div",null,t&&t.length>0?c.a.createElement(c.a.Fragment,null,c.a.createElement(h,{icon:n}),c.a.createElement(T,{playlists:t,playlistsFilters:l,handleChange:this.handleChange,value:r}),c.a.createElement(N,null)):c.a.createElement(c.a.Fragment,null,c.a.createElement(R.a,{active:!0},c.a.createElement(w.a,{size:"medium"},"Loading")),c.a.createElement(h,{headersize:"cover",icon:n})))}}]),a}(r.Component),q=Object(s.b)((function(e){return{playlists:e.playlists.playlists,error:e.playlists.error,playlistsFilters:e.playlistsFilters.playlistsFilters}}),{fetchPlaylists:function(e){return function(t){Y.a.get("https://api.spotify.com/v1/browse/featured-playlists",{headers:{Authorization:"Bearer ".concat(x)},params:e}).then((function(e){return t({type:n.FETCH_PLAYLISTS_SUCCESS,payload:e.data.playlists.items})})).catch((function(e){t({type:n.FETCH_PLAYLISTS_ERROR,payload:e})}))}},fetchPlaylistsFilters:function(){return function(e){Y.a.get("http://www.mocky.io/v2/5a25fade2e0000213aa90776").then((function(t){return e({type:l.FETCH_PLAYLISTS_FILTER_SUCCESS,payload:t})})).catch((function(t){console.log("Byanze mfash",t),e({type:l.FETCH_PLAYLISTS_FILTER_ERROR,payload:t})}))}}})(W),J=a(167);a.n(J).a.config();var X=function(){return c.a.createElement("a",{href:"https://accounts.spotify.com/authorize?client_id=".concat("8a251222196f4c30a6ffebe798ec2cd4","&redirect_uri=").concat("http%3A%2F%2Flocalhost%3A3006%2Fplaylists","&response_type=token&show_dialog=true")},c.a.createElement("button",{className:"header__login-btn"},"Login with Spotify"))};var M=function(){return c.a.createElement(u.a,null,c.a.createElement(m.c,null,c.a.createElement(m.a,{exact:!0,path:"/"},c.a.createElement(h,{button:c.a.createElement(X,null),headersize:"cover"})),c.a.createElement(m.a,{path:"/playlists"}," ",c.a.createElement(q,{icon:c.a.createElement(p.a,{className:"arrow down",color:"orange",size:"big"})})," ")))},V=a(29),$=a(169),G={playlists:[],error:null},K={playlistsFilters:[],error:null},Q=Object(V.c)({playlists:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.FETCH_PLAYLISTS_SUCCESS:return Object(f.a)(Object(f.a)({},e),{},{playlists:t.payload});case n.FETCH_PLAYLISTS_ERROR:return Object(f.a)(Object(f.a)({},e),{},{error:t.payload.response.data});default:return e}},playlistsFilters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.FETCH_PLAYLISTS_FILTER_SUCCESS:return Object(f.a)(Object(f.a)({},e),{},{playlistsFilters:t.payload.data.filters});case l.FETCH_PLAYLISTS_FILTER_ERROR:return Object(f.a)(Object(f.a)({},e),{},{error:t.payload});default:return e}}}),Z=[$.a],ee=Object(V.e)(Q,{},Object(V.d)(V.a.apply(void 0,Z),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(s.a,{store:ee},c.a.createElement(c.a.StrictMode,null,c.a.createElement(M,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[180,1,2]]]);
//# sourceMappingURL=main.bda994b8.chunk.js.map